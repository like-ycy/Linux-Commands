## 命令简介

sar命令用于全面地获取系统的CPU、运行队列、磁盘 I/O、分页（交换区）、内存、 CPU中断和网络等性能数据。

## 语法格式

```
sar -[ options ] time_interval number_of_tines_to_display
```

## 选项说明

```
-A  #汇总所有的报告
-a  #查看文件读写使用情况
-B  #查看附加的缓存的使用情况
-b  #查看缓存的使用情况
-c  #查看系统调用的使用情况
-d  #查看磁盘的使用情况
-g  #查看串口的使用情况
-h  #查看关于buffer使用的统计数据
-m  #查看IPC消息队列和信号量的使用情况
-n  #查看命名cache的使用情况
-p  #查看调页活动的使用情况
-q  #查看平均负载
-R  #查看进程的活动情况
-r  #查看没有使用的内存页面和硬盘块
-u  #查看CPU的利用率
-v  #查看进程、i节点、文件和锁表状态
-w  #查看系统交换活动状况
-y  #查看TTY设备活动状况
```

## 应用举例

查看内存交换空间的使用率信息

```
[root@centos7 ~]# sar -r
Linux 3.10.0-1127.18.2.el7.x86_64 (centos7)  03/28/2021  _x86_64_ (1 CPU)

11:10:02 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty
11:20:01 AM    532544    463140     46.51      2108    313176    232184      7.51    216412    134456         0
11:30:01 AM    532504    463180     46.52      2108    313180    232184      7.51    216436    134412         0
Average:       532524    463160     46.52      2108    313178    232184      7.51    216424    134434         0
```

输出的结果字段说明

```
kbmemfree  #空闲物理内存量
kbmemused  #使用中的物理内存量
%memused   #物理内存量使用率
kbbuffers  #内核中作为缓冲区使用的物理内存容量
kbcacheed  #内核中作为缓存使用的物理内存容量
kbswpfree  #交换区的空闲容量
kbswpused  #使用中的交换区容量
```

查看CPU使用率

```
[root@centos7 ~]# sar -u
Linux 3.10.0-1127.18.2.el7.x86_64 (centos7)  03/28/2021  _x86_64_ (1 CPU)

11:10:02 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle
11:20:01 AM     all      0.03      0.00      0.18      0.02      0.00     99.77
11:30:01 AM     all      0.03      0.00      0.17      0.02      0.00     99.78
Average:        all      0.03      0.00      0.18      0.02      0.00     99.77
```

查看平均负载

```
[root@centos7 ~]# sar -q
Linux 3.10.0-1127.18.2.el7.x86_64 (centos7)  03/28/2021  _x86_64_ (1 CPU)

11:10:02 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked
11:20:01 AM         1       108      0.00      0.01      0.05         0
11:30:01 AM         1       108      0.00      0.01      0.05         0
Average:            1       108      0.00      0.01      0.05         0
```

查看页面交换发生状况

```
[root@centos7 ~]# sar -w
Linux 3.10.0-1127.18.2.el7.x86_64 (centos7)  03/28/2021  _x86_64_ (1 CPU)

11:10:02 AM    proc/s   cswch/s
11:20:01 AM      0.02     19.10
11:30:01 AM      0.03     19.92
11:40:01 AM      0.02     19.45
Average:         0.02     19.49
```

查看I/O和传送速率的统计信息

```
[root@centos7 ~]# sar -b
Linux 3.10.0-1127.18.2.el7.x86_64 (centos7)  03/28/2021  _x86_64_ (1 CPU)

11:10:02 AM       tps      rtps      wtps   bread/s   bwrtn/s
11:20:01 AM      0.06      0.00      0.06      0.00      0.74
11:30:01 AM      0.03      0.00      0.03      0.00      0.40
Average:         0.05      0.00      0.05      0.00      0.57
```

输出字段说明

```
tps       #每秒钟物理设备的 I/O 传输总量                   
rtps      #每秒钟从物理设备读入的数据总量                  
wtps      #每秒钟向物理设备写入的数据总量                  
bread/s   #每秒钟从物理设备读入的数据量，单位为 块/s    
bwrtn/s   #每秒钟向物理设备写入的数据量，单位为 块/s
```

查看网络状态信息

```
[root@centos7 ~]# sar -n DEV
Linux 3.10.0-1127.18.2.el7.x86_64 (centos7)  03/28/2021  _x86_64_ (1 CPU)

11:10:02 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s
11:20:01 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
11:20:01 AM     ens33      0.83      0.54      0.06      0.05      0.00      0.00      0.00
11:30:01 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
11:30:01 AM     ens33      1.07      0.69      0.08      0.06      0.00      0.00      0.00
11:40:01 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
11:40:01 AM     ens33      0.91      0.60      0.07      0.05      0.00      0.00      0.00
Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
Average:        ens33      0.94      0.61      0.07      0.05      0.00      0.00  
```